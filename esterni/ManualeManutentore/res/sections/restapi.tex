\section{REST API}
\subsection{Introduzione}
Questa parte del documento si riferisce alle API che permettono a BlockCovid di offrire le funzionalità agli utenti e amministratori che usano rispettivamente l'app android e il portale web.

\subsubsection{Scopo}
Le REST API di BlockCovid permettono all'app utente e alla webapp amministratore di fornire a utenti e amministratori gli strumenti di cui necessitano per l'utilizzo.

\subsection{Requisiti e installazione}
Per poter utilizzare le REST API è necessario avere un'istanza del backend operativa. Nel caso in cui non si abbia il backend attivo, è possibile consultare la sezione §4.

\subsubsection{Formato dei dati}
Tutti i dati inviati e ricevuti dalle REST API sono in formato JSON (i.e. application/json).\\\\
I tipi di dati e i loro rispettivi valori descritti nelle sezioni che seguono rispecchiano quanto descritto nella sezione \textbf{§5.3}, in particolare la sezione \textbf{§5.3.1}.

\subsection{API}
\subsubsection{Metodi}
\paragraph{Occupazione}
\begin{center}
	\rowcolors{2}{lightest-grayest}{white}
	\begin{longtable}{|c|p{7cm}|p{5cm}|}
		\hline
		\rowcolor{lighter-grayer}
		\textbf{Richiesta HTTP} & \textbf{Path} & \textbf{Descrizione}\\		
		\hline
		\endfirsthead
		\textbf{POST} & /attendences/insert & Inserisce un'occupazione.\\
		\hline
		\textbf{POST} & /attendences/end & Termina un'occupazione.\\
		\hline
	\end{longtable}
\end{center}
\paragraph{Prenotazione}
\begin{center}
	\rowcolors{2}{lightest-grayest}{white}
	\begin{longtable}{|c|p{7cm}|p{5cm}|}
		\hline
		\rowcolor{lighter-grayer}
		\textbf{Richiesta HTTP} & \textbf{Path} & \textbf{Descrizione}\\		
		\hline
		\endfirsthead
		\textbf{POST} & booking/insert & Inserisce una prenotazione.\\
		\hline
		\textbf{GET} & booking/list & Restituisce la lista di tutte le prenotazioni.\\
		\hline
		\textbf{POST} & booking/modify & Modifica la prenotazione specificata.\\
		\hline
		\textbf{GET} & booking/del/\{int: id\} & Elimina una prenotazione.\\
		\hline
		\textbf{POST} & booking/gettimetonext & Restituisce quante ora ci sono a disposizione dalla prossima prenotazione.\\
		\hline
	\end{longtable}
\end{center}
\paragraph{Report}
\begin{center}
	\rowcolors{2}{lightest-grayest}{white}
	\begin{longtable}{|c|p{7cm}|p{5cm}|}
		\hline
		\rowcolor{lighter-grayer}
		\textbf{Richiesta HTTP} & \textbf{Path} & \textbf{Descrizione}\\		
		\hline
		\endfirsthead
		\textbf{POST} & report/occupations & Ritorna il report delle occupazioni del periodo specificato.\\
		\hline
		\textbf{POST} & report/sanitizations & Ritorna il report delle sanificazioni del periodo specificato.\\
		\hline
		\textbf{GET} & report/all & Ritorna la lista dei report presenti nel database.\\
		\hline
	\end{longtable}
\end{center}
\paragraph{Stanza}
\begin{center}
	\rowcolors{2}{lightest-grayest}{white}
	\begin{longtable}{|c|p{7cm}|p{5cm}|}
		\hline
		\rowcolor{lighter-grayer}
		\textbf{Richiesta HTTP} & \textbf{Path} & \textbf{Descrizione}\\		
		\hline
		\endfirsthead
		\textbf{GET} & /room/list & Ritorna la lista delle stanze.\\
		\hline
		\textbf{GET} & /room/del/\{int: id\} & Cancella la stanza specificata in \textit{id}.\\
		\hline
		\textbf{POST} & /room/insert & Aggiunge una nuova stanza con i dati specificati.\\
		\hline
		\textbf{POST} & /room/modify & Modifica una stanza esistente con i dati specificati.\\
		\hline
		\textbf{GET} & /room/dirty/list & Ritorna la lista delle stanze con almeno una postazione da sanificare.\\
		\hline
		\textbf{GET} & /room/failure/del/\{int: idFail\} & Elimina la failure inserita nel database.\\
		\hline
		\textbf{GET} & /room/failure/delall/\{int: idRoom\} & Elimina le failure appartenenti alla stanza specificata.\\
		\hline
		\textbf{POST} & /room/failure/insert & Aggiunge una nuova failure nel database.\\
		\hline
		\textbf{POST} & /room/failure/modify & Modifica una failure esistente con i dati specificati.\\
		\hline
		\textbf{GET} & /room/failure/list & Ritorna la lista di tutte le failure.\\
		\hline
	\end{longtable}
\end{center}
\paragraph{Utente}
\begin{center}
	\rowcolors{2}{lightest-grayest}{white}
	\begin{longtable}{|c|p{7cm}|p{5cm}|}
		\hline
		\rowcolor{lighter-grayer}
		\textbf{Richiesta HTTP} & \textbf{Path} & \textbf{Descrizione}\\		
		\hline
		\endfirsthead
		\textbf{GET} & /user/list & Ritorna la lista degli utenti.\\
		\hline
		\textbf{GET} & /user/del/\{int: id\} & Cancella l'utente specificato in \textit{id}.\\
		\hline
		\textbf{POST} & /user/insert & Aggiunge un nuovo utente con i dati specificati.\\
		\hline
		\textbf{POST} & /user/modify & Modifica un utente esistente con i dati specificati.\\
		\hline
		\textbf{POST} & /user/login & Verifica che i dati inseriti siano corretti per effettuare il login.\\
		\hline
		\textbf{GET} & /user/bookings/\{int: userId\} & Ritorna la lista di tutte le prenotazioni eseguite dall'utente specificato in \textit{userId}.\\
		\hline
	\end{longtable}
\end{center}
\paragraph{Postazione}
\begin{center}
	\rowcolors{2}{lightest-grayest}{white}
	\begin{longtable}{|c|p{7cm}|p{5cm}|}
		\hline
		\rowcolor{lighter-grayer}
		\textbf{Richiesta HTTP} & \textbf{Path} & \textbf{Descrizione}\\		
		\hline
		\endfirsthead
		\textbf{GET} & /workstation/list & Ritorna la lista delle postazioni.\\
		\hline
		\textbf{GET} & /workstation/del/\{int: id\} & Cancella la postazione specificata in \textit{id}.\\
		\hline
		\textbf{POST} & /workstation/insert & Aggiunge una nuova postazione con i dati specificati.\\
		\hline
		\textbf{POST} & /workstation/modify & Modifica una postazione esistente con i dati specificati.\\
		\hline
		\textbf{POST} & /workstation/getInfo & Ritorna le informazioni di una specifica postazione.\\
		\hline
		\textbf{POST} & /workstation/sanitize & Segna come \glock{sanificata} una specifica postazione.\\
		\hline
		\textbf{GET} & /workstation/dirty/list & Ritorna la lista delle postazioni da sanificare.\\
		\hline
		\textbf{POST} & /workstation/bookable/list & Ritorna la lista delle postazioni prenotabili.\\
		\hline
		\textbf{POST} & /workstation/sanitizeall & Imposta come sanificato tutte le postazioni appartenenti alla stanza specificata.\\
		\hline
		\textbf{GET} & /workstation/failure/del/\{int: idFail\} & Elimina la failure inserita nel database.\\
		\hline
		\textbf{GET} & /workstation/failure/delall/\{int: idWorkstation\} & Elimina le failure appartenenti alla postazione specificata.\\
		\hline
		\textbf{POST} & /workstation/failure/insert & Aggiunge una nuova failure nel database.\\
		\hline
		\textbf{POST} & /workstation/failure/modify & Modifica una failure esistente con i dati specificati.\\
		\hline
		\textbf{GET} & /workstation/failure/list & Ritorna la lista di tutte le failure.\\
		\hline
	\end{longtable}
\end{center}
\subsubsection{Descrizione}
\paragraph{/attendences/insert}
Chiamata POST. Nella sezione \textit{body} viene specificato il JSON con i dati necessari per l'occupazione.
\begin{itemize}
	\item \textbf{idworkstation}: id postazione;
	\item \textbf{iduser}: id utente;
	\item \textbf{time}: ora inizio occupazione in formato "aaaa-MM-gg hh:mm";
	\item \textbf{hour}: numero di ore di occupazione, 0 indica l'occupazione per tutto il tempo a disposizione.
\end{itemize}
\paragraph{/attendences/end}
Chiamata POST. Nella sezione \textit{body} viene specificato il JSON con i dati necessari per il termine dell'occupazione.
\begin{itemize}
	\item \textbf{idattendence}: id occupazione;
	\item \textbf{time}: ora fine occupazione in formato "aaaa-MM-gg hh:mm".
\end{itemize}
\paragraph{/booking/insert}
Chiamata POST. Nella sezione \textit{body} viene specificato il JSON con i dati necessari per l'inserimento di una prenotazione.
\begin{itemize}
	\item \textbf{idworkstation}: id postazione;
	\item \textbf{iduser}: id utente;
	\item \textbf{starttime}: ora inizio prenotazione in formato "aaaa-MM-gg hh:mm";
	\item \textbf{endtime}: ora fine prenotazione in formato "aaaa-MM-gg hh:mm".
\end{itemize}
\paragraph{/booking/list}
Chiamata GET. Ritorna la lista delle prenotazioni in formato JSON come segue.	\\
\begin{center}
	\begin{lstlisting}
	[{
	"id": 1,
	"idworkstation": 1,
	"iduser": 2,
	"starttime": "2021-06-01 10:30",
	"endtime": "2021-06-01 19:00"
	}]
	\end{lstlisting}
\end{center}
Rispettivamente i campi corrispondono a:
\begin{itemize}
	\item \textbf{id}: id prenotazione;
	\item \textbf{idworkstation}: nome postazione;
	\item \textbf{iduser}: id utente;
	\item \textbf{starttime}: ora inizio prenotazione in formato "aaaa-MM-gg hh:mm";
	\item \textbf{endtime}: ora fine prenotazione in formato "aaaa-MM-gg hh:mm".	
\end{itemize}
\paragraph{/booking/modify}
Chiamata POST. Nella sezione \textit{body} viene specificato il JSON con i dati necessari per la modifica della prenotazione. La prenotazione da modificare è determinata dal parametro \textit{id}:
\begin{itemize}
	\item \textbf{id}: id prenotazione;
	\item \textbf{idworkstation}: nome postazione;
	\item \textbf{iduser}: id utente;
	\item \textbf{starttime}: ora inizio prenotazione in formato "aaaa-MM-gg hh:mm";
	\item \textbf{endtime}: ora fine prenotazione in formato "aaaa-MM-gg hh:mm".	
\end{itemize}
\paragraph{/booking/del/\{int: id\}}
Chiamata GET. Elimina la prenotazione identificata da \textit{id}.
\paragraph{/booking/gettimetonext}
Chiamata POST. Nella sezione \textit{body} viene specificato il JSON con i dati necessari per il reperimento delle ore disponibili fino alla prenotazione successiva.
\begin{itemize}
	\item \textbf{idworkstation}: id postazione;
	\item \textbf{iduser}: id utente.
\end{itemize}
\paragraph{/report/occupations}
Chiamata POST. Nella sezione \textit{body} viene specificato il JSON con i dati necessari per il reperimento del report delle occupazioni.
\begin{itemize}
	\item \textbf{starttime}: ora inizio ricerca in formato "aaaa-MM-gg hh:mm";
	\item \textbf{endtime}: ora fine ricerca in formato "aaaa-MM-gg hh:mm".
\end{itemize}
\paragraph{/report/sanitizations}
Chiamata POST. Nella sezione \textit{body} viene specificato il JSON con i dati necessari per il reperimento del report delle sanificazioni.
\begin{itemize}
	\item \textbf{starttime}: ora inizio ricerca in formato "aaaa-MM-gg hh:mm";
	\item \textbf{endtime}: ora fine ricerca in formato "aaaa-MM-gg hh:mm".
\end{itemize}
\paragraph{/report/all}
Chiamata GET. Ritorna la lista dei report in formato JSON come segue.	\\
\begin{center}
	\begin{lstlisting}
	[{
	"id": 1,
	"reporttime": "lab1",
	"blockchainhash": 10,
	"fileHash": 10
	}]
	\end{lstlisting}
\end{center}
Rispettivamente i campi corrispondono a:
\begin{itemize}
	\item \textbf{id}: id report;
	\item \textbf{reporttime}: ora calcolo report inserito;
	\item \textbf{blockchainhash}: hash transazione \glock{blockchain};
	\item \textbf{fileHash}: hash report generato.
\end{itemize}
\paragraph{/room/list}
Chiamata GET. Ritorna la lista delle stanze in formato JSON come segue.	\\
\begin{center}
	\begin{lstlisting}
	[{
	"id": 1,
	"roomname": "lab1",
	"xroom": 10,
	"yroom": 10,
	"archived": 0
	}]
	\end{lstlisting}
\end{center}
Rispettivamente i campi corrispondono a:
\begin{itemize}
	\item \textbf{id}: id stanza;
	\item \textbf{roomname}: nome stanza;
	\item \textbf{xroom}: grandezza stanza nell'asse X;
	\item \textbf{yroom}: grandezza stanza nell'asse Y;
	\item \textbf{archived}: indica se la stanza è archiviata.	
\end{itemize}
\paragraph{/room/del/\{int: id\}}
Chiamata GET. Cancella una stanza specificandone l'id.
\paragraph{/room/insert}
Chiamata POST. Nella sezione \textit{body} viene specificato il JSON con i dati necessari per l'inserimento della nuova stanza:
\begin{itemize}
	\item \textbf{roomname}: nome stanza;
	\item \textbf{xroom}: grandezza stanza nell'asse X;
	\item \textbf{yroom}: grandezza stanza nell'asse Y;
	\item \textbf{archived}: indica se la stanza è archiviata.		
\end{itemize}

\paragraph{/room/modify}
Chiamata POST. Nella sezione \textit{body} viene specificato il JSON con i dati necessari per la modifica della stanza. La stanza da modificare è determinata dal parametro \textit{id}:
\begin{itemize}
	\item \textbf{id}: id stanza;
	\item \textbf{roomname}: nome stanza;
	\item \textbf{xroom}: grandezza stanza nell'asse X;
	\item \textbf{yroom}: grandezza stanza nell'asse Y;
	\item \textbf{archived}: indica se la stanza è archiviata.	
\end{itemize}
\paragraph{/room/dirty/list}
Chiamata GET. Ritorna la lista delle stanze con almeno una postazione non sanificata in formato JSON come segue.	\\
\begin{center}
	\begin{lstlisting}
	[{
	"id": 1,
	"roomname": "lab1",
	"xroom": 10,
	"yroom": 10,
	"archived": 0
	}]
	\end{lstlisting}
\end{center}
Rispettivamente i campi corrispondono a:
\begin{itemize}
	\item \textbf{id}: id stanza;
	\item \textbf{roomname}: nome stanza;
	\item \textbf{xroom}: grandezza stanza nell'asse X;
	\item \textbf{yroom}: grandezza stanza nell'asse Y;
	\item \textbf{archived}: indica se la stanza è archiviata.	
\end{itemize}
\paragraph{/room/failure/del/\{int: idFail\}}
Chiamata GET. Cancella un una "roomFailure" specificandone l'id.
\paragraph{/room/failure/delall/\{int: idRoom\}}
Chiamata GET. Cancella tutte le "roomFailure" identificate dalla id stanza.
\paragraph{/room/failure/insert}
Chiamata POST. Nella sezione \textit{body} viene specificato il JSON con i dati necessari per l'inserimento dell'inaccessibilità della stanza:
\begin{itemize}
	\item \textbf{idroom}: id stanza;
	\item \textbf{starttime}: ora inizio failure in formato "aaaa-MM-gg hh:mm";
	\item \textbf{endtime}: ora fine failure in formato "aaaa-MM-gg hh:mm".
\end{itemize}
Viene fatto notare che nel caso in cui si voglia specificare una failure a tempo indeterminato, \textit{endtime} viene impostato a \textit{null}.
\paragraph{/room/failure/modify}
Chiamata POST. Nella sezione \textit{body} viene specificato il JSON con i dati necessari per la modifica dell'inaccessibilità della stanza:
\begin{itemize}
	\item \textbf{id}: id failure;
	\item \textbf{idroom}: id stanza;
	\item \textbf{starttime}: ora inizio failure in formato "aaaa-MM-gg hh:mm";
	\item \textbf{endtime}: ora fine failure in formato "aaaa-MM-gg hh:mm".
\end{itemize}
\paragraph{/room/failure/list}
Chiamata GET. Ritorna la lista delle inaccessibilità delle stanze in formato JSON come segue.	\\
\begin{center}
	\begin{lstlisting}
	[{
	"id": 1,
	"idroom": 2,
	"starttime": "2021-06-01 10:30",
	"endtime": "2021-06-01 19:00"
	}]
	\end{lstlisting}
\end{center}
Rispettivamente i campi corrispondono a:
\begin{itemize}
	\item \textbf{id}: id failure;
	\item \textbf{idroom}: id stanza;
	\item \textbf{starttime}: ora inizio inaccessibilità in formato "aaaa-MM-gg hh:mm";
	\item \textbf{endtime}: ora fine inaccessibilità in formato "aaaa-MM-gg hh:mm".
\end{itemize}
\paragraph{/user/list}
Chiamata GET. Ritorna la lista degli utenti in formato JSON come segue.	\\
\begin{center}
	\begin{lstlisting}
	[{
	"id": 1,
	"username": "mrossi",
	"password": "000",
	"name": "mario",
	"surname": "rossi",
	"mail": "mario.rossi@gmail.com",
	"type": 0,
	"archived": 0
	}]
	\end{lstlisting}
\end{center}
Rispettivamente i campi corrispondono a:
\begin{itemize}
	\item \textbf{id}: id utente;
	\item \textbf{username}: username utente;
	\item \textbf{password}: password utente;
	\item \textbf{name}: nome utente;
	\item \textbf{surname}: cognome utente;	
	\item \textbf{mail}: indirizzo email utente;	
	\item \textbf{type}: tipo utente;	
	\item \textbf{archived}: indica se l'utente è archiviato.	
\end{itemize}
\paragraph{/user/del/\{int: id\}}
Chiamata GET. Cancella un utente specificandone l'id.
\paragraph{/user/insert}
Chiamata POST. Nella sezione \textit{body} viene specificato il JSON con i dati necessari per l'inserimento del nuovo utente:
\begin{itemize}
	\item \textbf{username}: username utente;
	\item \textbf{password}: password utente;
	\item \textbf{name}: nome utente;
	\item \textbf{surname}: cognome utente;	
	\item \textbf{mail}: indirizzo email utente;	
	\item \textbf{type}: tipo utente;	
	\item \textbf{archived}: indica se l'utente è archiviato.	
\end{itemize}

\paragraph{/user/modify}
Chiamata POST. Nella sezione \textit{body} viene specificato il JSON con i dati necessari per la modifica dell'utente. L'utente da modificare è determinato dal parametro \textit{id}:
\begin{itemize}
	\item \textbf{id}: id utente;
	\item \textbf{username}: username utente;
	\item \textbf{password}: password utente;
	\item \textbf{name}: nome utente;
	\item \textbf{surname}: cognome utente;	
	\item \textbf{mail}: indirizzo email utente;	
	\item \textbf{type}: tipo utente;	
	\item \textbf{archived}: indica se l'utente è archiviato.	
\end{itemize}

\paragraph{/user/login}
Chiamata POST. Nella sezione \textit{body} viene specificato il JSON con i dati necessari per il login dell'utente:
\begin{itemize}
	\item \textbf{username}: username utente;
	\item \textbf{password}: password utente.	
\end{itemize}
Se il login avviene con successo, viene ritornato l'oggetto \textit{User} in formato JSON come specificato in \textbf{§7.3.2.21}
\paragraph{user/bookings/\{int: userId\}}
Chiamata GET. Viene richiesta la lista delle prenotazioni dell'utente specificato in \textit{userId}.\\
Verrà ritornata una lista JSON come segue:
\begin{center}
	\begin{lstlisting}
	[{
	"bookId": 1,
	"workId": 1,
	"workName": "nome",
	"roomId": 1,
	"roomName": "nomeStanza",
	"start": "2021-07-30 10:00",
	"end": "2021-07-30 11:00"
	}]
	\end{lstlisting}
\end{center}
\begin{itemize}
	\item \textbf{bookId}: id prenotazione;
	\item \textbf{workId}: id postazione prenotata;
	\item \textbf{workName}: nome postazione;
	\item \textbf{roomId}: id stanza;
	\item \textbf{roomName}: nome stanza;	
	\item \textbf{start}: ora inizio prenotazione in formato "aaaa-MM-gg hh:mm";	
	\item \textbf{end}: ora fine prenotazione in formato "aaaa-MM-gg hh:mm".
\end{itemize}

\paragraph{/workstation/list}
Chiamata GET. Ritorna la lista delle postazioni in formato JSON come segue.	\\
\begin{center}
	\begin{lstlisting}
		[
			{
			"id": 1, 
			"tag": "00 c0 00 01 8d 91 04",
			"workstationname": "lab1-1x1",
			"xworkstation": 1, 
			"yworkstation": 1, 
			"idroom": 1,
			"state": 0,
			"sanitized": 1,
			"archived": 0
			}
		]
	\end{lstlisting}
\end{center}
Rispettivamente i campi corrispondono a:
\begin{itemize}
	\item \textbf{id}: id postazione;
	\item \textbf{tag}: id tag postazione;
	\item \textbf{workstationname}: nome postazione;
	\item \textbf{xworkstation}: posizione asse x all'interno della stanza;
	\item \textbf{yworkstation}: posizione asse y all'interno della stanza;	
	\item \textbf{idroom}: id stanza in cui è presente la postazione;	
	\item \textbf{state}: stato attuale della postazione;	
	\item \textbf{sanitized}: indica se la postazione è sanificata;	
	\item \textbf{archived}: indica se la postazione è archiviata.	
\end{itemize}
\paragraph{/workstation/del/\{int: id\}}
Chiamata GET. Cancella una postazione specificandone l'id.
\paragraph{/workstation/insert}
Chiamata POST. Nella sezione \textit{body} viene specificato il JSON con i dati necessari per l'inserimento della nuova postazione:
\begin{itemize}
	\item \textbf{tag}: id tag postazione;
	\item \textbf{workstationname}: nome postazione;
	\item \textbf{xworkstation}: posizione asse x all'interno della stanza;
	\item \textbf{yworkstation}: posizione asse y all'interno della stanza;	
	\item \textbf{idroom}: id stanza in cui è presente la postazione;	
	\item \textbf{state}: stato attuale della postazione;	
	\item \textbf{sanitized}: indica se la postazione è sanificata;	
	\item \textbf{archived}: indica se la postazione è archiviata.	
\end{itemize}
\paragraph{/workstation/modify}
Chiamata POST. Nella sezione \textit{body} viene specificato il JSON con i dati necessari per la modifica della postazione. La postazione da modificare è determinata dal parametro \textit{id}:
\begin{itemize}
	\item \textbf{id}: id postazione;
	\item \textbf{tag}: id tag postazione;
	\item \textbf{workstationname}: nome postazione;
	\item \textbf{xworkstation}: posizione asse x all'interno della stanza;
	\item \textbf{yworkstation}: posizione asse y all'interno della stanza;	
	\item \textbf{idroom}: id stanza in cui è presente la postazione;	
	\item \textbf{state}: stato attuale della postazione;	
	\item \textbf{sanitized}: indica se la postazione è sanificata;	
	\item \textbf{archived}: indica se la postazione è archiviata.	
\end{itemize}
\paragraph{/workstation/getInfo}
Chiamata POST. Nella sezione \textit{body} viene specificato l'idtag della postazione di cui si vogliono avere informazioni.\\
La risposta è strutturata come segue:
\begin{center}
	\begin{lstlisting}
	{
	"workId": 2,
	"workName": "lab1-1x2", 
	"workStatus": 1, 
	"workSanitized": 1, 
	"roomName": "lab1", 
	"bookedToday": 0
	}
	\end{lstlisting}
\end{center}
Se la postazione ha delle prenotazioni, allora la risposta avrà dei campi aggiuntivi:
\begin{center}
	\begin{lstlisting}
	{
	[...]
	"bookedToday": 1
	"bookings": [{
		"bookerId": 4,
		"bookerUsername": username,
		"bookerName": name,
		"bookerSurname": surname,
		"from": "2021-07-30 10:00",
		"to": "2021-07-30 11:00"
		}]
	}
	\end{lstlisting}
\end{center}
\begin{itemize}
	\item \textbf{workId}: id postazione;
	\item \textbf{workName}: nome postazione;	
	\item \textbf{workStatus}: stato attuale della postazione;	
	\item \textbf{workSanitized}: indica se la postazione è sanificata;
	\item \textbf{bookedToday}: indica se la postazione ha una prenotazione nella giornata in cui viene scansionata.
	\item \textbf{bookings}: lista prenotazioni presenti per la postazione.
	\begin{itemize}		
		\item \textbf{bookerId}: id utente della prenotazione;
		\item \textbf{bookerUsername}: nome utente di chi ha effettuato la prenotazione;
		\item \textbf{bookerName}: nome di chi ha effettuato la prenotazione;
		\item \textbf{bookerSurname}: cognome di chi ha effettuato la prenotazione;
		\item \textbf{from}: ora inizio prenotazione in formato "aaaa-MM-gg hh:mm";
		\item \textbf{to}: ora fine prenotazione in formato "aaaa-MM-gg hh:mm";
	\end{itemize}
\end{itemize}
\paragraph{/workstation/sanitize}
Chiamata POST. Inserisce una sanificazione per una specifica postazione, indicando chi ha effettuato tale pulizia e a che ora è avvenuta.\\
Il JSON è strutturato come segue:
\begin{itemize}
	\item \textbf{tag}: id tag postazione;
	\item \textbf{idUser}: id utente di chi ha effettuato la sanificazione;
	\item \textbf{data}: ora sanificazione in formato "aaaa-MM-gg hh:mm".
\end{itemize}

\paragraph{/workstation/dirty/list}
Chiamata GET. Ritorna la lista delle postazioni non sanificate in formato JSON come segue.	\\
\begin{center}
	\begin{lstlisting}
	[{
	"id": 1, 
	"tag": "00 c0 00 01 8d 91 04",
	"workstationname": "lab1-1x1",
	"xworkstation": 1, 
	"yworkstation": 1, 
	"idroom": 1,
	"state": 0,
	"sanitized": 1,
	"archived": 0
	}]
	\end{lstlisting}
\end{center}
Rispettivamente i campi corrispondono a:
\begin{itemize}
	\item \textbf{id}: id postazione;
	\item \textbf{tag}: id tag postazione;
	\item \textbf{workstationname}: nome postazione;
	\item \textbf{xworkstation}: posizione asse x all'interno della stanza;
	\item \textbf{yworkstation}: posizione asse y all'interno della stanza;	
	\item \textbf{idroom}: id stanza in cui è presente la postazione;	
	\item \textbf{state}: stato attuale della postazione;	
	\item \textbf{sanitized}: indica se la postazione è sanificata;	
	\item \textbf{archived}: indica se la postazione è archiviata.	
\end{itemize}
\paragraph{/workstation/bookable/list}
Chiamata POST. Ritorna le postazioni prenotabili specificato un intervallo di tempo.\\
Il JSON per la chiamata è strutturato come segue:
\begin{itemize}
	\item \textbf{startTime}: ora inizio intervallo in formato "aaaa-MM-gg hh:mm;
	\item \textbf{endTime}: ora fine intervallo in formato "aaaa-MM-gg hh:mm;
	\item \textbf{idRoom}: id stanza.
\end{itemize}
\paragraph{/workstation/sanitizeall}
Chiamata POST. Imposta come sanificate tutte le postazioni appartenenti ad una stanza.\\
Il JSON per la chiamata è strutturato come segue:
\begin{itemize}
	\item \textbf{time}: ora sanificazione in formato "aaaa-MM-gg hh:mm;
	\item \textbf{iduser}: id utente che ha effettuato la sanificazione;
	\item \textbf{idroom}: id stanza.
\end{itemize}
\paragraph{/workstation/failure/del/\{int: idFail\}}
Chiamata GET. Cancella un una "workstationFailure" specificandone l'id.
\paragraph{/workstation/failure/delall/\{int: idWork\}}
Chiamata GET. Cancella tutte le "workstationFailure" che appartengono alla postazione identificata da \textit{idWork}.
\paragraph{/workstation/failure/insert}
Chiamata POST. Nella sezione \textit{body} viene specificato il JSON con i dati necessari per l'inserimento dell'inaccessibilità della postazione:
\begin{itemize}
	\item \textbf{idworkstation}: id postazione;
	\item \textbf{starttime}: ora inizio failure in formato "aaaa-MM-gg hh:mm";
	\item \textbf{endtime}: ora fine failure in formato "aaaa-MM-gg hh:mm".
\end{itemize}
Viene fatto notare che nel caso in cui si voglia specificare una failure a tempo indeterminato, \textit{endtime} viene impostato a \textit{null}.
\paragraph{/workstation/failure/modify}
Chiamata POST. Nella sezione \textit{body} viene specificato il JSON con i dati necessari per l'inserimento dell'inaccessibilità della postazione:
\begin{itemize}
	\item \textbf{id}: id failure;
	\item \textbf{idworkstation}: id postazione;
	\item \textbf{starttime}: ora inizio failure in formato "aaaa-MM-gg hh:mm";
	\item \textbf{endtime}: ora fine failure in formato "aaaa-MM-gg hh:mm".
\end{itemize}
\paragraph{/workstation/failure/list}
Chiamata GET. Ritorna la lista delle inaccessibilità delle postazioni in formato JSON come segue.	\\
\begin{center}
	\begin{lstlisting}
	[{
	"id": 1,
	"idworkstation": 2,
	"starttime": "2021-06-01 10:30",
	"endtime": "2021-06-01 19:00"
	}]
	\end{lstlisting}
\end{center}
Rispettivamente i campi corrispondono a:
\begin{itemize}
	\item \textbf{id}: id failure;
	\item \textbf{idworkstation}: id postazione;
	\item \textbf{starttime}: ora inizio inaccessibilità in formato "aaaa-MM-gg hh:mm";
	\item \textbf{endtime}: ora fine inaccessibilità in formato "aaaa-MM-gg hh:mm".
\end{itemize}

